<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
      xmlns:v-on="http://www.w3.org/1999/xhtml" xmlns:v-slot="http://www.w3.org/1999/XSL/Transform"
      xmlns:v-for="http://www.w3.org/1999/xhtml">
<head>
    <title>Мои списки</title>
    <link rel="stylesheet" href="/css/normalize.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/popup-default.css">
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <script type="text/x-template" id="modal-template">
    </script>
</head>
    <body>
        <h1 th:inline="text">Здравствуйте, [[${#httpServletRequest.remoteUser}]]!</h1>
        <form th:action="@{/logout}" method="post">
            <input type="submit" value="Выйти">
        </form>
        <div id="app">
            <button id="show-modal-list" name="add-list" class="btn-dark-olive-green" v-on:click="showPopUpListAdd = true">Добавить список</button>
            <button id="show-modal-note" name="add-note" class="btn-dark-olive-green" v-on:click="showPopUpNoteAdd = true">Добавить заметку</button>
<!--            <button id="show-modal-tag" name="add-tag" class="btn-dark-olive-green" v-on:click="showPopUpTagAdd = true">Добавить тег</button>-->
            <popup-unit-data :show-modal="showPopUpListAdd" :list="newList" v-on:close="closePopUpAdd">
                <template v-slot:modal-header-title>
                     Создаем список
                </template>
                <template v-slot:modal-body>
                    <modal-body-list :list="newList" v-on:item-id="addItemIntoNewList" v-on:tag-id="addTagIntoNewList"/>
                </template>
                <template v-slot:modal-footer>
                    <button class="modal-default-button" v-on:click="pushList">
                        Добавить
                    </button>
                </template>
            </popup-unit-data>
            <popup-unit-data :show-modal="showPopUpListChange" :list="modifiedList" v-on:close="closePopUpChange">
                <template v-slot:modal-header-title>
                    Редактируем список
                </template>
                <template v-slot:modal-body>
                    <modal-body-list :list="modifiedList" v-on:item-id="addItemIntoModifiedList" v-on:tag-id="addTagIntoModifiedList"/>
                </template>
                <template v-slot:modal-footer>
                    <button class="modal-default-button" v-on:click="changeList">
                        Сохранить
                    </button>
                </template>
            </popup-unit-data>
            <popup-unit-data :show-modal="showPopUpNoteAdd" :note="newNote" v-on:close="closePopUpAdd">
                <template v-slot:modal-header-title>
                     Создаем заметку
                </template>
                <template v-slot:modal-body>
                    <modal-body-note :note="newNote" v-on:tag-id="addTagIntoNewNote"/>
                </template>
                <template v-slot:modal-footer>
                    <button class="modal-default-button" v-on:click="pushNote">
                        Добавить
                    </button>
                </template>
            </popup-unit-data>
            <popup-unit-data :show-modal="showPopUpNoteChange" :note="modifiedNote" v-on:close="closePopUpChange">
                <template v-slot:modal-header-title>
                    Редактируем заметку
                </template>
                <template v-slot:modal-body>
                    <modal-body-note :note="modifiedNote" v-on:tag-id="addTagIntoModifiedNote"/>
                </template>
                <template v-slot:modal-footer>
                    <button class="modal-default-button" v-on:click="changeNote">
                        Сохранить
                    </button>
                </template>
            </popup-unit-data>
            <div>
            <field-tags :tags="tags" v-on:show-all="showAllLists" v-on:sort-tag-id="sortByTag" v-on:del="deleteTag"/>
            </div>
            <div>
            <v-select :options="options" v-on:selected-check="optionSelect" />
            </div>
            <div class="field-units">
                <div>
                <field-lists :lists="lists" v-on:edit="editList" :show-all-lists="showAllLists" /></div>
                <div>
                <field-notes :notes="notes" v-on:edit="editNote" :show-all-notes="showAllNotes" /></div>
            </div>
        </div>
    <script src="/js/main.js"></script>
    </body>
</html>